import axios from 'axios'
import { ElMessage } from 'element-plus'
import { LLM_AI_insert_person_url } from '../stores/url' // 确保路径正确

export function useAIInsertPerson() {
  const AIInsertPerson = async (file_id) => {
    try {
      const response = await axios.post(
        LLM_AI_insert_person_url,
        {
          file_id: file_id,
        },
        {
          headers: {
            'Content-Type': 'application/json',
          },
        },
      )

      if (response.status === 200) {
        ElMessage.success(`已经成功在数据库内新增人员信息`)
        ElMessage.success(response.data.msg)
      } else {
        ElMessage.error(`${response.data.msg || '未知错误'}`)
      }
    } catch (error) {
      ElMessage.error(`${response.data.msg || '未知错误'}`)
      console.error(error)
    }
  }

  return {
    AIInsertPerson,
  }
}
